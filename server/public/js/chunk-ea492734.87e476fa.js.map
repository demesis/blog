{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./src/views/Message.vue?4eff","webpack:///./src/views/Message.vue","webpack:///./src/views/Message.vue?e80c","webpack:///./node_modules/core-js/internals/string-trim-forced.js"],"names":["$","$trim","trim","forcedStringTrimMethod","target","proto","forced","this","module","exports","requireObjectCoercible","toString","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","replace","start","end","id","class","type","rows","placeholder","maxlength","show-word-limit","msg","showEmoji","size","handleMessageSubmit","emoji","item","index","key","handleEmojiClick","msgList","_id","style","user","formatDate","date","handleLikesClick","likes","length","handleReplyClick","children","childItem","replyUser","reply","handleReplySubmit","name","data","ifEmojiShow","computed","methods","userInfo","$message","error","$axios","method","url","code","success","getMsg","filter","ifShowReply","val","Date","YY","getFullYear","MM","getMonth","DD","getDate","hh","getHours","mm","getMinutes","ss","getSeconds","replyUserId","created","mounted","document","addEventListener","render","__scopeId","fails","non","METHOD_NAME"],"mappings":"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","file":"js/chunk-ea492734.87e476fa.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Message.vue?vue&type=style&index=0&id=9aad83e8&lang=less&scoped=true\"","<template>\r\n  <div id=\"Message\">\r\n    <article>\r\n      <h2>留言板</h2>\r\n      <p>文明发言，下面也有些小表情可以使用\\(^o^)/~</p>\r\n      <el-input\r\n        type=\"textarea\"\r\n        :rows=\"2\"\r\n        placeholder=\"请输入内容\"\r\n        maxlength=\"100\"\r\n        show-word-limit\r\n        v-model=\"msg\"\r\n      >\r\n      </el-input>\r\n      <div class=\"btn\">\r\n        <i class=\"iconfont icon-biaoqing bq\" @click.stop=\"showEmoji\"></i>\r\n        <el-button type=\"primary\" size=\"mini\" @click=\"handleMessageSubmit\"\r\n          >发表</el-button\r\n        >\r\n        <div\r\n          class=\"emoji\"\r\n          :class=\"{\r\n            show: ifEmojiShow,\r\n          }\"\r\n        >\r\n          <ul>\r\n            <li\r\n              v-for=\"(item, index) in emoji\"\r\n              :key=\"index\"\r\n              @click=\"handleEmojiClick(item)\"\r\n            >\r\n              {{ item }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </article>\r\n\r\n    <article class=\"content\">\r\n      <ul>\r\n        <li v-for=\"item in msgList\" :key=\"item._id\">\r\n          <!--父留言-->\r\n          <div class=\"parent\">\r\n            <!--留言-->\r\n            <div class=\"left\">\r\n              <!--用户头像-->\r\n              <!-- <img :src=\"baseURL + item.user.photo\" alt=\"\" /> -->\r\n              <div\r\n                class=\"img\"\r\n                :style=\"{\r\n                  backgroundImage: `url(${baseURL}${item.user.photo})`,\r\n                }\"\r\n              ></div>\r\n            </div>\r\n            <div class=\"right\">\r\n              <div class=\"name-time\">\r\n                <!--用户名-->\r\n                <span>{{ item.user.user }}</span>\r\n                <!--留言时间-->\r\n                <span>{{ formatDate(item.date) }}</span>\r\n              </div>\r\n              <div class=\"message\">\r\n                <!--留言内容-->\r\n                {{ item.msg }}\r\n              </div>\r\n              <div class=\"like-reply\">\r\n                <i\r\n                  class=\"like iconfont icon-xinaixin\"\r\n                  :class=\"{\r\n                    isLike:\r\n                      userInfo._id && item.likes.indexOf(userInfo._id) !== -1,\r\n                  }\"\r\n                  @click=\"handleLikesClick(item)\"\r\n                ></i>\r\n                <!--点赞数-->\r\n                <span>{{ item.likes.length }}</span>\r\n                <i\r\n                  class=\"reply iconfont icon-huifu\"\r\n                  @click=\"handleReplyClick(item, item.user)\"\r\n                ></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!-- 子留言-->\r\n          <div\r\n            class=\"child\"\r\n            v-for=\"(childItem, index) in item.children\"\r\n            :key=\"index\"\r\n          >\r\n            <div class=\"left\">\r\n              <div\r\n                class=\"img\"\r\n                :style=\"{\r\n                  backgroundImage: `url(${baseURL}${childItem.user.photo})`,\r\n                }\"\r\n              ></div>\r\n            </div>\r\n            <div class=\"right\">\r\n              <div class=\"name-time\">\r\n                <span>{{ childItem.user.user }}</span>\r\n                <span>{{ formatDate(childItem.date) }}</span>\r\n              </div>\r\n              <div class=\"message\">\r\n                <span>@{{ childItem.replyUser.user }}</span>\r\n                {{ childItem.msg }}\r\n              </div>\r\n              <div class=\"like-reply\">\r\n                <i\r\n                  class=\"like iconfont icon-xinaixin\"\r\n                  :class=\"{\r\n                    isLike:\r\n                      userInfo._id &&\r\n                      childItem.likes.indexOf(userInfo._id) !== -1,\r\n                  }\"\r\n                  @click=\"handleLikesClick(item, childItem)\"\r\n                ></i>\r\n                <span>{{ childItem.likes.length }}</span>\r\n                <i\r\n                  class=\"reply iconfont icon-huifu\"\r\n                  @click=\"handleReplyClick(item, childItem.user)\"\r\n                ></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!--回复框-->\r\n          <div\r\n            class=\"replyInput\"\r\n            :class=\"{\r\n              show: item.ifShowReply,\r\n            }\"\r\n          >\r\n            <el-input\r\n              :placeholder=\"'@' + item.replyUser.user\"\r\n              v-model=\"item.reply\"\r\n              size=\"mini\"\r\n            ></el-input>\r\n            <el-button\r\n              class=\"replyBtn\"\r\n              type=\"primary\"\r\n              size=\"mini\"\r\n              @click=\"handleReplySubmit(item)\"\r\n              >回复\r\n            </el-button>\r\n            <div class=\"clear\"></div>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </article>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"Message\",\r\n  data() {\r\n    return {\r\n      msg: \"\",\r\n      emoji: [\r\n        \"😃\",\r\n        \"😁\",\r\n        \"😂\",\r\n        \"😊\",\r\n        \"🙃\",\r\n        \"🥰\",\r\n        \"😘\",\r\n        \"🤭\",\r\n        \"🤔\",\r\n        \"😏\",\r\n        \"😵\",\r\n        \"😟\",\r\n        \"🙁\",\r\n        \"😳\",\r\n        \"😰\",\r\n        \"😭\",\r\n        \"😖\",\r\n        \"😶\",\r\n        \"😷\",\r\n        \"🤮\",\r\n        \"🧐\",\r\n        \"😡\",\r\n        \"😠\",\r\n        \"😈\",\r\n        \"💩\",\r\n        \"💋\",\r\n        \"🤡\",\r\n        \"☠️\",\r\n        \"👻\",\r\n        \"🙈\",\r\n        \"🙉\",\r\n        \"❤️\",\r\n        \"💖\",\r\n        \"💢\",\r\n        \"💣\",\r\n        \"💤\",\r\n        \"👋\",\r\n        \"💪\",\r\n        \"👍\",\r\n        \"👌\",\r\n        \"🤞\",\r\n        \"🤟\",\r\n        \"🤙\",\r\n        \"👊\",\r\n        \"🖕\",\r\n        \"🤝\",\r\n        \"🙏\",\r\n        \"🙅\",\r\n        \"🙅‍♂️\",\r\n        \"👨‍✈️\",\r\n        \"👩‍✈️\",\r\n        \"👷\",\r\n        \"👷‍♀️\",\r\n        \"🤦\",\r\n        \"🤦‍♂️\",\r\n        \"👴\",\r\n        \"🧓\",\r\n        \"🐶\",\r\n        \"🐽\",\r\n        \"🐍\",\r\n        \"🐴\",\r\n        \"🐮\",\r\n        \"🐖\",\r\n        \"🐑\",\r\n        \"🐓\",\r\n        \"🦚\",\r\n        \"🐲\",\r\n        \"🐳\",\r\n        \"🐟\",\r\n        \"🐌\",\r\n      ],\r\n      ifEmojiShow: false,\r\n      msgList: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"userInfo\"]),\r\n  },\r\n\r\n  methods: {\r\n    //点击图片显示emoji\r\n    showEmoji() {\r\n      this.ifEmojiShow = true;\r\n    },\r\n\r\n    //表情被点击\r\n    handleEmojiClick(item) {\r\n      this.msg += item;\r\n    },\r\n\r\n    //留言发表\r\n    async handleMessageSubmit() {\r\n      //验证是否登陆\r\n      if (!this.userInfo.user) {\r\n        return this.$message.error(\"请先登录！\");\r\n      }\r\n\r\n      //验证有没有内容\r\n      let msg = this.msg.trim();\r\n      if (!msg) {\r\n        return this.$message.error(\"请输入留言内容。\");\r\n      }\r\n\r\n      //往后端发请求\r\n      let { data } = await this.$axios({\r\n        method: \"POST\",\r\n        url: \"/msg/report\",\r\n        data: { msg },\r\n      });\r\n\r\n      //后续处理\r\n\r\n      if (data.code) {\r\n        return this.$message.error(data.msg);\r\n      }\r\n\r\n      this.$message.success(\"留言成功！\");\r\n      this.msg = \"\";\r\n      this.getMsg();\r\n    },\r\n\r\n    //请求留言数据\r\n    async getMsg() {\r\n      let { data } = await this.$axios({\r\n        method: \"GET\",\r\n        url: \"/msg/get\",\r\n      });\r\n\r\n      if (data.code) {\r\n        return this.$message.error(\"请求留言数据失败，请稍后再试\");\r\n      }\r\n\r\n      //添加一些新属性\r\n      data.data.filter((item) => {\r\n        //用来控制回复框显不显示\r\n        item.ifShowReply = false;\r\n        //用来存储每个留言的回复\r\n        item.reply = \"\";\r\n        //用来存储回复的是谁\r\n        item.replyUser = {};\r\n      });\r\n\r\n      //请求成功\r\n      this.msgList = data.data;\r\n    },\r\n\r\n    //处理时间格式\r\n    formatDate(val) {\r\n      let date = new Date(val),\r\n        YY = date.getFullYear(),\r\n        MM = date.getMonth() + 1,\r\n        DD = date.getDate(),\r\n        hh = date.getHours(),\r\n        mm = date.getMinutes(),\r\n        ss = date.getSeconds();\r\n\r\n      hh < 10 && (hh = \"0\" + hh);\r\n      mm < 10 && (mm = \"0\" + mm);\r\n      ss < 10 && (ss = \"0\" + ss);\r\n\r\n      return `${YY}-${MM}-${DD} ${hh}:${mm}:${ss}`;\r\n    },\r\n\r\n    //回复按钮被点击\r\n    handleReplyClick(item, replyUser) {\r\n      //未登录时，不让打开\r\n      if (!this.userInfo.user) {\r\n        return this.$message.error(\"请先登录\");\r\n      }\r\n\r\n      item.ifShowReply = !item.ifShowReply;\r\n      item.replyUser = replyUser;\r\n    },\r\n\r\n    //回复提交\r\n    async handleReplySubmit(item) {\r\n      let reply = item.reply.trim();\r\n\r\n      if (!reply) {\r\n        return this.$message.error(\"请输入回复内容\");\r\n      }\r\n\r\n      let { data } = await this.$axios({\r\n        method: \"POST\",\r\n        url: \"/msg/reply\",\r\n        data: {\r\n          msg: reply,\r\n          _id: item._id,\r\n          replyUserId: item.replyUser._id,\r\n        },\r\n      });\r\n\r\n      if (data.code) {\r\n        return this.$message.error(data.msg);\r\n      }\r\n\r\n      //回复成功\r\n      this.$message.success(data.msg);\r\n      //重新请求留言数据\r\n      this.getMsg();\r\n    },\r\n\r\n    // 点赞\r\n    async handleLikesClick(item, childItem) {\r\n      let { data } = await this.$axios({\r\n        method: \"POST\",\r\n        url: \"/msg/like\",\r\n        data: {\r\n          item,\r\n          childItem,\r\n        },\r\n      });\r\n\r\n      if (data.code) {\r\n        return this.$message.error(data.msg);\r\n      }\r\n\r\n      this.getMsg();\r\n    },\r\n  },\r\n\r\n  created() {\r\n    //请求留言数据\r\n    this.getMsg();\r\n  },\r\n\r\n  mounted() {\r\n    //为了让emoji框能够关掉\r\n    document.addEventListener(\"click\", () => {\r\n      this.ifEmojiShow = false;\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#Message {\r\n  flex: 1;\r\n\r\n  article {\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    margin-bottom: 15px;\r\n    box-shadow: 0 0 4px #ddd;\r\n    padding: 25px 20px;\r\n    background-color: #fff;\r\n    font-family: Quicksand;\r\n\r\n    h2 {\r\n      margin-bottom: 15px;\r\n      font-size: 20px;\r\n      letter-spacing: 3px;\r\n      line-height: 24px;\r\n      border-left: 5px solid #73b899;\r\n      text-indent: 10px;\r\n    }\r\n\r\n    p {\r\n      text-indent: 2em;\r\n      color: #444;\r\n      font-size: 14px;\r\n      letter-spacing: 4px;\r\n      line-height: 30px;\r\n\r\n      &.border {\r\n        border-bottom: 1px dotted rgb(170, 170, 170);\r\n      }\r\n    }\r\n\r\n    .el-textarea {\r\n      min-height: 80px;\r\n      margin-top: 20px;\r\n    }\r\n\r\n    /deep/ textarea {\r\n      min-height: 80px !important;\r\n      font-family: \"Quicksand\", \"Microsoft YaHei\", sans-serif;\r\n      color: #444;\r\n      font-size: 14px;\r\n      letter-spacing: 4px;\r\n      line-height: 30px;\r\n    }\r\n\r\n    .btn {\r\n      position: relative;\r\n      display: flex;\r\n      margin-top: 10px;\r\n      justify-content: space-between;\r\n\r\n      i.bq {\r\n        font-size: 20px;\r\n        cursor: pointer;\r\n      }\r\n\r\n      .emoji {\r\n        display: none;\r\n        position: absolute;\r\n        top: 30px;\r\n        left: 0;\r\n        width: 300px;\r\n        height: 210px;\r\n        padding: 10px;\r\n        background-color: #fff;\r\n        box-shadow: 0 0 5px #aaa;\r\n        border-radius: 3px;\r\n        font-size: 18px;\r\n\r\n        &.show {\r\n          display: block;\r\n        }\r\n\r\n        &::before {\r\n          content: \"\";\r\n          position: absolute;\r\n          top: -10px;\r\n          left: 5px;\r\n          width: 0;\r\n          height: 0;\r\n          border: 5px solid transparent;\r\n          border-bottom-color: #bbb;\r\n        }\r\n\r\n        ul {\r\n          display: flex;\r\n          flex-wrap: wrap;\r\n          width: 100%;\r\n          height: 100%;\r\n          border-top: 1px solid #ddd;\r\n          border-left: 1px solid #ddd;\r\n\r\n          li {\r\n            box-sizing: border-box;\r\n            width: 30px;\r\n            height: 30px;\r\n            line-height: 29px;\r\n            text-align: center;\r\n            border-right: 1px solid #ddd;\r\n            border-bottom: 1px solid #ddd;\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    &.content {\r\n      user-select: none;\r\n\r\n      ul {\r\n        li {\r\n          padding-bottom: 5px;\r\n          margin-bottom: 10px;\r\n          border-bottom: 1px dashed #ddd;\r\n          font-size: 12px;\r\n          font-family: \"Microsoft YaHei\", \"sans-serif\";\r\n\r\n          div.parent,\r\n          div.child {\r\n            display: flex;\r\n          }\r\n\r\n          div.child {\r\n            margin-left: 55px;\r\n            margin-top: 3px;\r\n          }\r\n\r\n          div.left {\r\n            overflow: hidden;\r\n            width: 40px;\r\n            height: 40px;\r\n            margin-right: 15px;\r\n            border-radius: 50%;\r\n\r\n            .img {\r\n              width: 40px;\r\n              height: 40px;\r\n              background-size: cover;\r\n              background-position: center top;\r\n            }\r\n          }\r\n\r\n          div.right {\r\n            flex: 1;\r\n\r\n            div.name-time {\r\n              font-size: 12px;\r\n              margin-bottom: 3px;\r\n\r\n              span:nth-child(1) {\r\n                color: #73b899;\r\n              }\r\n\r\n              span:nth-child(2) {\r\n                color: #aaa;\r\n                margin-left: 10px;\r\n                font-family: \"Microsoft YaHei\", \"sans-serif\";\r\n              }\r\n            }\r\n\r\n            div.message {\r\n              color: #666;\r\n              letter-spacing: 2px;\r\n              margin-bottom: 3px;\r\n              word-break: break-word;\r\n\r\n              span {\r\n                color: #409eff;\r\n                margin-right: 5px;\r\n              }\r\n            }\r\n\r\n            div.like-reply {\r\n              i {\r\n                cursor: pointer;\r\n                font-size: 14px;\r\n                color: #aaa;\r\n              }\r\n\r\n              i.isLike {\r\n                color: #f30606;\r\n              }\r\n\r\n              span {\r\n                display: inline-block;\r\n                width: 43px;\r\n                font-size: 12px;\r\n                color: #aaa;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .replyInput {\r\n      box-sizing: border-box;\r\n      overflow: hidden;\r\n      width: 100%;\r\n      height: 0;\r\n      padding-left: 55px;\r\n      transition: height 0.3s;\r\n\r\n      &.show {\r\n        height: 57px;\r\n      }\r\n\r\n      .replyBtn {\r\n        padding: 4px 9px !important;\r\n        float: right;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./Message.vue?vue&type=template&id=9aad83e8&scoped=true\"\nimport script from \"./Message.vue?vue&type=script&lang=js\"\nexport * from \"./Message.vue?vue&type=script&lang=js\"\n\nimport \"./Message.vue?vue&type=style&index=0&id=9aad83e8&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-9aad83e8\"\n\nexport default script","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n"],"sourceRoot":""}